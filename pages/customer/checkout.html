<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RDC - Checkout</title>
    <link rel="stylesheet" href="../../css/styles.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span class="logo-text">RDC System</span>
                <span id="current-user"></span>
            </div>
            <div class="nav-menu">
                <button class="nav-link" onclick="window.location.href='products.html'">Products</button>
                <button class="nav-link" onclick="window.location.href='orders.html'">My Orders</button>
                <button class="nav-link" onclick="window.location.href='cart.html'">Cart<span id="cart-badge" class="badge">0</span></button>
                <button class="nav-link" onclick="window.location.href='profile.html'">Profile</button>
                <button class="nav-link logout" onclick="logout()">Logout</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="page-content">
        <div class="page-header">
            <h2>Checkout</h2>
        </div>

        <div class="checkout-container">
            <form id="checkout-form">
                <div class="form-section">
                    <h3>Shipping Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" id="shipping-name" required>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="shipping-email" required>
                        </div>
                    </div>
                    <div class="form-row single">
                        <div class="form-group">
                            <label>Address</label>
                            <input type="text" id="shipping-address" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>City</label>
                            <input type="text" id="shipping-city" required>
                        </div>
                        <div class="form-group">
                            <label>ZIP Code</label>
                            <input type="text" id="shipping-zip" required>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Payment Method</h3>
                    <div class="form-group">
                        <label>
                            <input type="radio" name="payment" value="card" checked>
                            Credit/Debit Card
                        </label>
                        <label>
                            <input type="radio" name="payment" value="cod">
                            Cash on Delivery
                        </label>
                    </div>
                </div>

                <div id="card-payment" class="form-section">
                    <h3>Card Details</h3>
                    <div class="form-group">
                        <label>Card Number</label>
                        <input type="text" id="card-number" placeholder="1234 5678 9012 3456">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Expiry Date</label>
                            <input type="text" id="card-expiry" placeholder="MM/YY">
                        </div>
                        <div class="form-group">
                            <label>CVV</label>
                            <input type="text" id="card-cvv" placeholder="123">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Order Summary</h3>
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span id="checkout-subtotal">$0.00</span>
                    </div>
                    <div class="summary-row">
                        <span>Tax:</span>
                        <span id="checkout-tax">$0.00</span>
                    </div>
                    <div class="summary-row">
                        <span>Shipping:</span>
                        <span id="checkout-shipping">$0.00</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span id="checkout-total">$0.00</span>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary btn-block">Place Order</button>
                <button type="button" class="btn btn-secondary btn-block" onclick="goToPage('../customer/cart.html')">Back to Cart</button>
            </form>
        </div>
    </div>

    <script src="../../js/data.js"></script>
    <script src="../../js/auth.js"></script>
    <script src="../../js/customer.js"></script>
    
    <script>
        // Setup nav buttons on checkout page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Checkout page fully loaded');
            console.log('currentUser:', currentUser);
            console.log('currentCart:', currentCart);
            
            // Setup nav button event listeners
            const navButtons = document.querySelectorAll('.nav-link');
            navButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    const btnText = this.textContent.trim().split('\n')[0];
                    console.log('Nav button clicked:', btnText);
                    
                    if (btnText === 'Products') {
                        window.location.href = 'products.html';
                    } else if (btnText === 'My Orders') {
                        window.location.href = 'orders.html';
                    } else if (btnText.includes('Cart')) {
                        window.location.href = 'cart.html';
                    } else if (btnText === 'Profile') {
                        window.location.href = 'profile.html';
                    }
                });
            });
            
            // Setup logout button
            const logoutBtn = document.querySelector('.nav-link.logout');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function(e) {
                    console.log('Logout button clicked');
                    logout();
                });
            }
        });
    </script>
</body>
</html>
