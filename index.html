<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RDC - Login</title>
    <script>
      // Override alert IMMEDIATELY to suppress language fetching errors
      const _originalAlert = window.alert;
      window.alert = function (msg) {
        if (msg && msg.includes("Error fetching languages")) {
          return; // Suppress silently
        }
        _originalAlert(msg);
      };
      // Also suppress console errors with this message
      const _originalError = console.error;
      console.error = function (...args) {
        const msg = args.join(" ");
        if (msg.includes("Error fetching languages")) {
          return;
        }
        _originalError.apply(console, args);
      };
    </script>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/footer.css" />
    <link rel="stylesheet" href="css/images.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Login Page -->
    <div id="login-page" class="page active">
      <div class="login-container">
        <div class="login-box">
          <h1>RDC System</h1>
          <p class="subtitle">Rapid Delivery Center</p>
          <form id="login-form">
            <div class="form-group">
              <label for="email">Email/Username</label>
              <input
                type="text"
                id="email"
                placeholder="Enter email or username"
                autocomplete="username"
                required
              />
            </div>
            <div class="form-group">
              <label for="password">Password</label>
              <input
                type="password"
                id="password"
                placeholder="Enter password"
                autocomplete="current-password"
                required
              />
            </div>
            <button type="submit" class="btn btn-primary">Login</button>
          </form>
          <div class="demo-login-container">
            <p class="demo-login-label">Quick Demo Login:</p>
            <button
              type="button"
              id="demo-login-customer"
              class="btn demo-btn demo-btn-customer"
            >
              Customer
            </button>
            <button
              type="button"
              id="demo-login-rdc"
              class="btn demo-btn demo-btn-rdc"
            >
              RDC Staff
            </button>
            <button
              type="button"
              id="demo-login-delivery"
              class="btn demo-btn demo-btn-delivery"
            >
              Delivery
            </button>
            <button
              type="button"
              id="demo-login-admin"
              class="btn demo-btn demo-btn-admin"
            >
              Admin
            </button>
          </div>
          <div
            class="margin-top-20 text-center border-top-1-ddd padding-top-20"
          >
            <p>
              Don't have an account?
              <a
                href="signup.html"
                class="text-color-primary cursor-pointer text-decoration-none font-weight-bold"
                >Create one here</a
              >
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Navbar -->
    <nav id="navbar" class="navbar display-none">
      <div class="nav-container">
        <div class="nav-logo">
          <span class="logo-text">RDC System</span>
          <span id="current-user"></span>
        </div>
        <div class="nav-menu">
          <button id="nav-products" class="nav-link display-none">
            Products
          </button>
          <button id="nav-orders" class="nav-link display-none">Orders</button>
          <button id="nav-admin" class="nav-link display-none">Admin</button>
          <button id="nav-rdc" class="nav-link display-none">RDC</button>
          <button id="nav-delivery" class="nav-link display-none">
            Deliveries
          </button>
          <button id="nav-cart" class="nav-link display-none">
            Cart<span id="cart-badge" class="badge">0</span>
          </button>
          <button id="logout-btn" class="nav-link logout">Logout</button>
        </div>
      </div>
    </nav>

    <!-- Products Page (Customer) -->
    <div id="products-page" class="page">
      <div class="page-header">
        <h2>Products Catalog</h2>
        <p>Browse and shop our products</p>
      </div>
      <div class="products-controls">
        <div class="search-box">
          <input
            type="text"
            id="search-input"
            placeholder="Search products..."
          />
        </div>
        <div class="filters">
          <select id="category-filter" aria-label="Filter by Category">
            <option value="">All Categories</option>
            <option value="Electronics">Electronics</option>
            <option value="Clothing">Clothing</option>
            <option value="Home">Home & Garden</option>
            <option value="Books">Books</option>
            <option value="Toys">Toys & Games</option>
          </select>
          <select id="price-filter" aria-label="Filter by Price">
            <option value="">All Prices</option>
            <option value="0-50">₨0 - ₨50K</option>
            <option value="50-100">₨50K - ₨100K</option>
            <option value="100-500">₨100K - ₨500K</option>
            <option value="500+">₨500K+</option>
          </select>
          <select id="sort-filter" aria-label="Sort Products">
            <option value="name">Sort by Name</option>
            <option value="price-low">Price: Low to High</option>
            <option value="price-high">Price: High to Low</option>
            <option value="popularity">Most Popular</option>
          </select>
        </div>
      </div>
      <div id="products-grid" class="products-grid">
        <!-- Products will be populated here -->
      </div>
    </div>

    <!-- Shopping Cart Page -->
    <div id="cart-page" class="page">
      <div class="page-header">
        <h2>Shopping Cart</h2>
      </div>
      <div class="cart-container">
        <div id="cart-items" class="cart-items">
          <!-- Cart items will be populated here -->
        </div>
        <div class="cart-summary">
          <h3>Order Summary</h3>
          <div class="summary-row">
            <span>Subtotal:</span>
            <span id="subtotal">₨0.00</span>
          </div>
          <div class="summary-row">
            <span>Tax (10%):</span>
            <span id="tax">₨0.00</span>
          </div>
          <div class="summary-row">
            <span>Shipping:</span>
            <span id="shipping">₨5.00</span>
          </div>
          <div class="summary-row total">
            <span>Total:</span>
            <span id="total">₨0.00</span>
          </div>
          <button id="checkout-btn" class="btn btn-primary btn-block">
            Proceed to Checkout
          </button>
          <button
            id="continue-shopping-btn"
            class="btn btn-secondary btn-block"
          >
            Continue Shopping
          </button>
        </div>
      </div>
    </div>

    <!-- Checkout Page -->
    <div id="checkout-page" class="page">
      <div class="page-header">
        <h2>Checkout</h2>
      </div>
      <div class="checkout-container">
        <form id="checkout-form">
          <div class="form-section">
            <h3>Shipping Information</h3>
            <div class="form-row">
              <div class="form-group">
                <label>Full Name</label>
                <input
                  type="text"
                  id="shipping-name"
                  aria-label="Full Name"
                  required
                />
              </div>
              <div class="form-group">
                <label>Email</label>
                <input
                  type="email"
                  id="shipping-email"
                  aria-label="Email"
                  required
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Address</label>
                <input
                  type="text"
                  id="shipping-address"
                  aria-label="Address"
                  required
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>City</label>
                <input
                  type="text"
                  id="shipping-city"
                  aria-label="City"
                  required
                />
              </div>
              <div class="form-group">
                <label>ZIP Code</label>
                <input
                  type="text"
                  id="shipping-zip"
                  aria-label="ZIP Code"
                  required
                />
              </div>
            </div>
          </div>
          <!-- Firebase SDKs: loaded once at the page bottom to avoid duplicate global initialization -->

          <div class="form-section">
            <h3>Payment Method</h3>
            <div class="form-group">
              <label>
                <input type="radio" name="payment" value="card" checked />
                Credit/Debit Card
              </label>
              <label>
                <input type="radio" name="payment" value="cod" />
                Cash on Delivery
              </label>
            </div>
          </div>

          <div id="card-payment" class="form-section">
            <h3>Card Details</h3>
            <div class="form-group">
              <label>Card Number</label>
              <input
                type="text"
                id="card-number"
                placeholder="1234 5678 9012 3456"
                aria-label="Card Number"
                required
              />
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Expiry Date</label>
                <input
                  type="text"
                  id="card-expiry"
                  placeholder="MM/YY"
                  aria-label="Expiry Date"
                  required
                />
              </div>
              <div class="form-group">
                <label>CVV</label>
                <input
                  type="text"
                  id="card-cvv"
                  placeholder="123"
                  aria-label="CVV"
                  required
                />
              </div>
            </div>
          </div>

          <div class="form-section">
            <h3>Order Summary</h3>
            <div class="summary-row">
              <span>Subtotal:</span>
              <span id="checkout-subtotal">₨0.00</span>
            </div>
            <div class="summary-row">
              <span>Tax:</span>
              <span id="checkout-tax">₨0.00</span>
            </div>
            <div class="summary-row">
              <span>Shipping:</span>
              <span id="checkout-shipping">₨0.00</span>
            </div>
            <div class="summary-row total">
              <span>Total:</span>
              <span id="checkout-total">₨0.00</span>
            </div>
          </div>

          <button type="submit" class="btn btn-primary btn-block">
            Place Order
          </button>
          <button
            type="button"
            id="back-to-cart-btn"
            class="btn btn-secondary btn-block"
          >
            Back to Cart
          </button>
        </form>
      </div>
    </div>

    <!-- Orders Page (Customer - Track Orders) -->
    <div id="orders-page" class="page">
      <div class="page-header">
        <h2>My Orders</h2>
      </div>
      <div id="orders-list" class="orders-list">
        <!-- Orders will be populated here -->
      </div>
    </div>

    <!-- Order Details Modal -->
    <div id="order-modal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Order Details</h2>
        <div id="order-details">
          <!-- Order details will be populated here -->
        </div>
      </div>
    </div>

    <!-- Product Details Modal -->
    <div id="product-modal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <div id="product-details">
          <!-- Product details will be populated here -->
        </div>
      </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="admin-page" class="page">
      <div class="page-header">
        <h2>Admin Dashboard</h2>
      </div>
      <div class="admin-tabs">
        <button class="tab-button active" data-tab="admin-overview">
          Overview
        </button>
        <button class="tab-button" data-tab="admin-users">Users</button>
        <button class="tab-button" data-tab="admin-products">Products</button>
        <button class="tab-button" data-tab="admin-reports">Reports</button>
      </div>

      <!-- Overview Tab -->
      <div id="admin-overview" class="tab-content active">
        <div class="dashboard-stats">
          <div class="stat-card">
            <h3>Total Orders</h3>
            <p id="stat-total-orders">0</p>
          </div>
          <div class="stat-card">
            <h3>Total Revenue</h3>
            <p id="stat-total-revenue">₨0</p>
          </div>
          <div class="stat-card">
            <h3>Pending Deliveries</h3>
            <p id="stat-pending-deliveries">0</p>
          </div>
          <div class="stat-card">
            <h3>Low Stock Items</h3>
            <p id="stat-low-stock">0</p>
          </div>
        </div>
        <div class="alerts-section">
          <h3>Alerts</h3>
          <div id="admin-alerts">
            <!-- Alerts will be populated here -->
          </div>
        </div>
      </div>

      <!-- Users Tab -->
      <div id="admin-users" class="tab-content">
        <div class="table-wrapper">
          <table class="data-table">
            <thead>
              <tr>
                <th>User ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Role</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="users-table">
              <!-- Users will be populated here -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Products Tab -->
      <div id="admin-products" class="tab-content">
        <button class="btn btn-primary" id="add-product-btn">
          Add New Product
        </button>
        <div class="table-wrapper">
          <table class="data-table">
            <thead>
              <tr>
                <th>Product ID</th>
                <th>Name</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Category</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="products-table">
              <!-- Products will be populated here -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Reports Tab -->
      <div id="admin-reports" class="tab-content">
        <div class="report-controls">
          <div class="form-group">
            <label for="report-type">Report Type</label>
            <select id="report-type" title="Select report type">
              <option value="sales">Sales Report</option>
              <option value="inventory">Inventory Report</option>
              <option value="delivery">Delivery Report</option>
            </select>
          </div>
          <div class="form-group">
            <label>Date Range</label>
            <input
              type="date"
              id="report-start-date"
              title="Report start date"
            />
            <input type="date" id="report-end-date" title="Report end date" />
          </div>
          <button class="btn btn-primary" id="generate-report-btn">
            Generate Report
          </button>
        </div>
        <div id="report-display" class="report-display">
          <!-- Report will be displayed here -->
        </div>
      </div>
    </div>

    <!-- RDC Staff Dashboard -->
    <div id="rdc-page" class="page">
      <div class="page-header">
        <h2>RDC Staff Dashboard</h2>
      </div>
      <div class="rdc-tabs">
        <button class="tab-button active" data-tab="rdc-orders">Orders</button>
        <button class="tab-button" data-tab="rdc-inventory">Inventory</button>
        <button class="tab-button" data-tab="rdc-delivery">Deliveries</button>
      </div>

      <!-- Orders Tab -->
      <div id="rdc-orders" class="tab-content active">
        <div class="table-wrapper">
          <table class="data-table">
            <thead>
              <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Address</th>
                <th>Date</th>
                <th>Total</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="rdc-orders-table">
              <!-- Orders will be populated here -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Inventory Tab -->
      <div id="rdc-inventory" class="tab-content">
        <button class="btn btn-primary" id="add-inventory-btn">
          Add Stock
        </button>
        <div class="table-wrapper">
          <table class="data-table">
            <thead>
              <tr>
                <th>Product ID</th>
                <th>Product Name</th>
                <th>Current Stock</th>
                <th>Reorder Level</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="rdc-inventory-table">
              <!-- Inventory will be populated here -->
            </tbody>
          </table>
        </div>
      </div>

      <!-- Delivery Tab -->
      <div id="rdc-delivery" class="tab-content">
        <div class="table-wrapper">
          <table class="data-table">
            <thead>
              <tr>
                <th>Delivery ID</th>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Status</th>
                <th>Assigned Staff</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="rdc-delivery-table">
              <!-- Deliveries will be populated here -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Delivery Staff Dashboard -->
    <div id="delivery-page" class="page">
      <div class="page-header">
        <h2>Delivery Dashboard</h2>
      </div>
      <div class="table-wrapper">
        <table class="data-table">
          <thead>
            <tr>
              <th>Delivery ID</th>
              <th>Order ID</th>
              <th>Customer</th>
              <th>Address</th>
              <th>Status</th>
              <th>Estimated Time</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="delivery-staff-table">
            <!-- Deliveries will be populated here -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Forms Modal for Adding/Editing -->
    <div id="form-modal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <div id="form-container">
          <!-- Forms will be populated here -->
        </div>
      </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

    <!-- Firebase Config & Initialization -->
    <script src="js/firebase-config.js"></script>
    <script>
      (async () => {
        window._FB_READY = await FirebaseHelper.init();
      })();
    </script>

    <!-- Application Scripts -->
    <script src="js/data.js"></script>
    <script src="js/modals.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/script.js"></script>
    <script src="/js/footer-loader.js"></script>
  </body>
</html>
